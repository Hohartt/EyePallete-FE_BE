<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="./css/stimulus.css" />
    <link rel="stylesheet" type="text/css" href="./css/reset.css" />
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <script src="./stimulus.js"></script>
  </head>
  <body>
    <div class="all-wrapper">
      <div class="stimulus-wrapper">
        <div class="header">
          <img class="logo" src="./img/logo.png" alt="logo" />
        </div>
        <div class="mid-wrapper">
        <div class="pallete-wrapper">
          <div class="red"><p>13HZ</p></div>
          <div class="plus-box">
            <img src="./img/plus_2.png" width="100rem" />
          </div>
          <div class="green"><p>19HZ</p></div>
          <div class="plus-box">
            <img src="./img/plus_2.png" width="100rem" />
          </div>
          <div class="blue"><p>31HZ</p></div>
        </div> 
        <img class="spring" src="./img/Sketch-4.PNG" alt="용수철" />
        <div class="draw-area">
          <div class="draw-circle-wrapper">
            <div class="first-line">
              <div class="circle-part-1"></div>
              <div class="circle-part-2"></div>
            </div>
            <div class="second-line">
              <div class="circle-part-4"></div>
              <div class="circle-part-3"></div>
            </div>
          </div>
        </div>
       </div>
      </div>

      <div class="alert-background">
        <div>
          <p>
            아이팔레트 실행 중...
          </p>
          <img src="./img/plus_2.png"/>
        </div>
      </div>

      <div class="alert-first-background">
        <div>
          <p>
            첫번째 영역에 색칠하고자 하는 색을<br />
            30초간 응시해주세요😊
          </p>
          <img src="./img/plus_2.png"/>
        </div>
      </div>

      <div class="alert-second-background">
        <div>
          <p>
            두번째 영역에 색칠하고자 하는 색을<br />
            30초간 응시해주세요😊
          </p>
          <img src="./img/plus_2.png"/>
        </div>
      </div>

      <div class="alert-third-background">
        <div>
          <p>
            세번째 영역에 색칠하고자 하는 색을<br />
            30초간 응시해주세요😊
          </p>
          <img src="./img/plus_2.png"/>
        </div>
      </div>

      <div class="alert-fourth-background">
        <div>
          <p>
            네번째 영역에 색칠하고자 하는 색을<br />
            30초간 응시해주세요😊
          </p>
          <img src="./img/plus_2.png"/>
        </div>
      </div>

      <div class="alert-final-background">
        <div>
          <p>
            측정이 완료되었습니다. </br>
            본인의 그림을 확인해보세요😊
          </p>
        </div>
    </div>

    <script>

      // 중립 알림 시작 (50초 동안)
      setTimeout(() => {
        window.scrollTo(0, 0);
        $('.stimulus-wrapper').css({ display: 'none' });
        $('.alert-first-background').css({ display: 'none' });
        $('.alert-second-background').css({ display: 'none' });
        $('.alert-third-background').css({ display: 'none' });
        $('.alert-fourth-background').css({ display: 'none' });
        $('.alert-final-background').css({ display: 'none' });
      }, 0);

      setTimeout(()=>{
        $.ajax({
            type: 'GET',
            url: 'http://127.0.0.1:5000/'
        })
        .then((res)=> console.log(res))
        .catch((e)=> {});
      }, 5000);

      // 첫번째 영역 알림 (50초 이후 10초 동안)
      setTimeout(() => {
        $.ajax({
          type: 'GET',
          url: 'http://127.0.0.1:5000/mid_average'
        })
                .then((res)=> console.log(res))
                .catch((e)=> {});
        $('.alert-background').css({ display: 'none' });
        $('.alert-first-background').css({ display: 'block' });
        window.scrollTo(0, 0);
      }, 50000);

      // 첫번째 주파수 측정 (30초 동안)
      setTimeout(() => {
        window.scrollTo(0, 0);
        $('.stimulus-wrapper').css({ display: 'block' });
        $('.alert-first-background').css({ display: 'none' });
        $('.circle-part-1').css({border : '1px solid black'});
      }, 0);

      // 두번째 알림 (10초동안)
      setTimeout(() => {
        $.ajax({
            type: 'GET',
            url: 'http://127.0.0.1:5000/first'
        })
        .then((res)=> console.log(res))
        .catch((e)=> {
          $('.circle-part-1').css({backgroundColor : 'red'});
        });
        window.scrollTo(0, 0);
        $('.alert-second-background').css({ display: 'block' });
        $('.stimulus-wrapper').css({ display: 'none' });
        $('.draw-circle-wrapper').css({transform : 'rotate(-45deg)'});
      }, 90000);

      // 두번째 주파수 측정(30초동안)
      setTimeout(() => {
        window.scrollTo(0, 0);
        $('.alert-second-background').css({ display: 'none' });
        $('.stimulus-wrapper').css({ display: 'block' });
        $('.circle-part-2').css({border : '1px solid black'});
      }, 100000);

      // 세번째 알림
      setTimeout(() => {
        $.ajax({
            type: 'GET',
            url: 'http://127.0.0.1:5000/second'
        })
        .then((res)=> console.log(res))
        .catch((e)=> {
          $('.circle-part-2').css({backgroundColor : 'blue'});
        });
        window.scrollTo(0, 0);
        $('.alert-third-background').css({ display: 'block' });
        $('.stimulus-wrapper').css({ display: 'none' });
        $('.draw-circle-wrapper').css({transform : 'rotate(-135deg)'});
      }, 130000);

      // 세번째 주파수 측정
      setTimeout(() => {
        window.scrollTo(0, 0);
        $('.alert-third-background').css({ display: 'none' });
        $('.stimulus-wrapper').css({ display: 'block' });
        $('.circle-part-3').css({border : '1px solid black'});
      }, 140000);

      // 네번째 알림
      setTimeout(() => {
        $.ajax({
            type: 'GET',
            url: 'http://127.0.0.1:5000/third'
        })
        .then((res)=> console.log(res))
        .catch((e)=> {
          $('.circle-part-3').css({backgroundColor : 'green'});
        });
        window.scrollTo(0, 0);
        $('.alert-fourth-background').css({ display: 'block' });
        $('.stimulus-wrapper').css({ display: 'none' });
        $('.draw-circle-wrapper').css({transform : 'rotate(-225deg)'});
      }, 170000);

       // 네번째 주파수 측정
       setTimeout(() => {
        window.scrollTo(0, 0);
        $('.alert-fourth-background').css({ display: 'none' });
        $('.stimulus-wrapper').css({ display: 'block' });
        $('.circle-part-4').css({border : '1px solid black'});
      }, 180000);

       // 종료
       setTimeout(() => {
        $.ajax({
            type: 'GET',
            url: 'http://127.0.0.1:5000/fourth'
        })
        .then((res)=> console.log(res))
        .catch((e)=> {
          $('.circle-part-4').css({backgroundColor : 'blue'});
        });
        window.scrollTo(0, 0);
        $('.alert-fourth-background').css({ display: 'none' });
        $('.stimulus-wrapper').css({ display: 'none' });
        $('.alert-final-background').css({ display: 'block' });
        $('.draw-circle-wrapper').css({transform : 'rotate(-315deg)'});
        $('.draw-circle-wrapper').css({transform : 'rotate(-315deg)'});
      }, 210000);

      // 종료 후 결과물 보여주기
      setTimeout(() => {
        window.scrollTo(0, 0);
        $('.pallete-wrapper').css({ display: 'none' });
        $('.stimulus-wrapper').css({ display: 'block' });
        $('.alert-final-background').css({ display: 'none' });
        $('.mid-wrapper').css({backgroundImage : 'none'});
      }, 215000);
      // 215000
    </script>
  </body>
</html>
